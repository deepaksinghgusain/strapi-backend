(self.webpackChunkmy_project=self.webpackChunkmy_project||[]).push([[6719],{3330:(T,l,t)=>{"use strict";Object.defineProperty(l,Symbol.toStringTag,{value:"Module"});const e=t(6629);l.Checkbox=e.Checkbox},4191:(T,l,t)=>{var e=t(87864),a=t(86386),c=t(45353),i=t(29884),d=t(74565),f=t(52689),h=t(48126),u=t(82388),v=t(82261);function P(L,m,S){m.length?m=e(m,function(R){return v(R)?function(N){return a(N,R.length===1?R[0]:R)}:R}):m=[u];var K=-1;m=e(m,f(c));var U=i(L,function(R,N,H){var I=e(m,function(O){return O(R)});return{criteria:I,index:++K,value:R}});return d(U,function(R,N){return h(R,N,S)})}T.exports=P},6629:(T,l,t)=>{"use strict";Object.defineProperty(l,Symbol.toStringTag,{value:"Module"});const e=t(92132),a=t(21272),c=t(63891),i=t(41999),d=t(69106),f=t(48941),h=t(61383),u=t(91753),v=t(69909),P=t(73725),L=t(67296),m=t(83215),S=O=>O&&O.__esModule?O:{default:O};function K(O){if(O&&O.__esModule)return O;const b=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(O){for(const y in O)if(y!=="default"){const j=Object.getOwnPropertyDescriptor(O,y);Object.defineProperty(b,y,j.get?j:{enumerable:!0,get:()=>O[y]})}}return b.default=O,Object.freeze(b)}const U=K(a),N=S(c).default(f.Typography)`
  display: flex;
  align-items: flex-start;
  * {
    cursor: ${({disabled:O})=>O?"not-allowed":"pointer"};
  }
`,H=U.forwardRef((O,b)=>{const{id:y}=d.useField();return e.jsx(h.BaseCheckbox,{ref:b,id:y,...O})}),I=U.forwardRef(({children:O,disabled:b=!1,id:y,hint:j,error:W,...V},ne)=>{const te=i.useId(y);let se;return W?se=`${te}-error`:j&&(se=`${te}-hint`),e.jsx(u.Field,{id:te,hint:j,error:W,children:e.jsxs(v.Flex,{direction:"column",alignItems:"stretch",gap:1,children:[e.jsxs(N,{as:"label",textColor:"neutral800",disabled:b,children:[e.jsx(H,{ref:ne,disabled:b,"aria-describedby":se,...V}),e.jsx(P.Box,{paddingLeft:2,children:O})]}),e.jsx(L.FieldHint,{}),e.jsx(m.FieldError,{})]})})});l.Checkbox=I},8895:(T,l,t)=>{"use strict";const e=t(92132),a=i=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1rem",height:"1rem",fill:"none",viewBox:"0 0 24 24",...i,children:e.jsx("path",{fill:"#212134",fillRule:"evenodd",d:"M23.604 3.514c.528.528.528 1.36 0 1.887l-2.622 2.607-4.99-4.99L18.6.396a1.322 1.322 0 0 1 1.887 0l3.118 3.118ZM0 24v-4.99l14.2-14.2 4.99 4.99L4.99 24H0Z",clipRule:"evenodd"})}),c=a;T.exports=c},13555:(T,l,t)=>{"use strict";Object.defineProperty(l,Symbol.toStringTag,{value:"Module"});const e=t(92132),a=t(21272),c=({children:i,...d})=>{const f=a.Children.toArray(i).map((h,u)=>a.isValidElement(h)?a.cloneElement(h,{"aria-rowindex":u+2}):h);return e.jsx("tbody",{...d,children:f})};l.RawTbody=c},14096:(T,l,t)=>{"use strict";Object.defineProperty(l,Symbol.toStringTag,{value:"Module"});const e=t(21272),a=e.createContext({rowIndex:0,colIndex:0,setTableValues(){throw new Error("setTableValues must be initialized via the RawTableContext.Provider")}}),c=()=>e.useContext(a);l.RawTableContext=a,l.useTable=c},20094:T=>{var l={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u1EA4:"A",\u1EAE:"A",\u1EB2:"A",\u1EB4:"A",\u1EB6:"A",\u00C6:"AE",\u1EA6:"A",\u1EB0:"A",\u0202:"A",\u00C7:"C",\u1E08:"C",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u1EBE:"E",\u1E16:"E",\u1EC0:"E",\u1E14:"E",\u1E1C:"E",\u0206:"E",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u1E2E:"I",\u020A:"I",\u00D0:"D",\u00D1:"N",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u1ED0:"O",\u1E4C:"O",\u1E52:"O",\u020E:"O",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00DD:"Y",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u1EA5:"a",\u1EAF:"a",\u1EB3:"a",\u1EB5:"a",\u1EB7:"a",\u00E6:"ae",\u1EA7:"a",\u1EB1:"a",\u0203:"a",\u00E7:"c",\u1E09:"c",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u1EBF:"e",\u1E17:"e",\u1EC1:"e",\u1E15:"e",\u1E1D:"e",\u0207:"e",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u1E2F:"i",\u020B:"i",\u00F0:"d",\u00F1:"n",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u1ED1:"o",\u1E4D:"o",\u1E53:"o",\u020F:"o",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00FD:"y",\u00FF:"y",\u0100:"A",\u0101:"a",\u0102:"A",\u0103:"a",\u0104:"A",\u0105:"a",\u0106:"C",\u0107:"c",\u0108:"C",\u0109:"c",\u010A:"C",\u010B:"c",\u010C:"C",\u010D:"c",C\u0306:"C",c\u0306:"c",\u010E:"D",\u010F:"d",\u0110:"D",\u0111:"d",\u0112:"E",\u0113:"e",\u0114:"E",\u0115:"e",\u0116:"E",\u0117:"e",\u0118:"E",\u0119:"e",\u011A:"E",\u011B:"e",\u011C:"G",\u01F4:"G",\u011D:"g",\u01F5:"g",\u011E:"G",\u011F:"g",\u0120:"G",\u0121:"g",\u0122:"G",\u0123:"g",\u0124:"H",\u0125:"h",\u0126:"H",\u0127:"h",\u1E2A:"H",\u1E2B:"h",\u0128:"I",\u0129:"i",\u012A:"I",\u012B:"i",\u012C:"I",\u012D:"i",\u012E:"I",\u012F:"i",\u0130:"I",\u0131:"i",\u0132:"IJ",\u0133:"ij",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u1E30:"K",\u1E31:"k",K\u0306:"K",k\u0306:"k",\u0139:"L",\u013A:"l",\u013B:"L",\u013C:"l",\u013D:"L",\u013E:"l",\u013F:"L",\u0140:"l",\u0141:"l",\u0142:"l",\u1E3E:"M",\u1E3F:"m",M\u0306:"M",m\u0306:"m",\u0143:"N",\u0144:"n",\u0145:"N",\u0146:"n",\u0147:"N",\u0148:"n",\u0149:"n",N\u0306:"N",n\u0306:"n",\u014C:"O",\u014D:"o",\u014E:"O",\u014F:"o",\u0150:"O",\u0151:"o",\u0152:"OE",\u0153:"oe",P\u0306:"P",p\u0306:"p",\u0154:"R",\u0155:"r",\u0156:"R",\u0157:"r",\u0158:"R",\u0159:"r",R\u0306:"R",r\u0306:"r",\u0212:"R",\u0213:"r",\u015A:"S",\u015B:"s",\u015C:"S",\u015D:"s",\u015E:"S",\u0218:"S",\u0219:"s",\u015F:"s",\u0160:"S",\u0161:"s",\u0162:"T",\u0163:"t",\u021B:"t",\u021A:"T",\u0164:"T",\u0165:"t",\u0166:"T",\u0167:"t",T\u0306:"T",t\u0306:"t",\u0168:"U",\u0169:"u",\u016A:"U",\u016B:"u",\u016C:"U",\u016D:"u",\u016E:"U",\u016F:"u",\u0170:"U",\u0171:"u",\u0172:"U",\u0173:"u",\u0216:"U",\u0217:"u",V\u0306:"V",v\u0306:"v",\u0174:"W",\u0175:"w",\u1E82:"W",\u1E83:"w",X\u0306:"X",x\u0306:"x",\u0176:"Y",\u0177:"y",\u0178:"Y",Y\u0306:"Y",y\u0306:"y",\u0179:"Z",\u017A:"z",\u017B:"Z",\u017C:"z",\u017D:"Z",\u017E:"z",\u017F:"s",\u0192:"f",\u01A0:"O",\u01A1:"o",\u01AF:"U",\u01B0:"u",\u01CD:"A",\u01CE:"a",\u01CF:"I",\u01D0:"i",\u01D1:"O",\u01D2:"o",\u01D3:"U",\u01D4:"u",\u01D5:"U",\u01D6:"u",\u01D7:"U",\u01D8:"u",\u01D9:"U",\u01DA:"u",\u01DB:"U",\u01DC:"u",\u1EE8:"U",\u1EE9:"u",\u1E78:"U",\u1E79:"u",\u01FA:"A",\u01FB:"a",\u01FC:"AE",\u01FD:"ae",\u01FE:"O",\u01FF:"o",\u00DE:"TH",\u00FE:"th",\u1E54:"P",\u1E55:"p",\u1E64:"S",\u1E65:"s",X\u0301:"X",x\u0301:"x",\u0403:"\u0413",\u0453:"\u0433",\u040C:"\u041A",\u045C:"\u043A",A\u030B:"A",a\u030B:"a",E\u030B:"E",e\u030B:"e",I\u030B:"I",i\u030B:"i",\u01F8:"N",\u01F9:"n",\u1ED2:"O",\u1ED3:"o",\u1E50:"O",\u1E51:"o",\u1EEA:"U",\u1EEB:"u",\u1E80:"W",\u1E81:"w",\u1EF2:"Y",\u1EF3:"y",\u0200:"A",\u0201:"a",\u0204:"E",\u0205:"e",\u0208:"I",\u0209:"i",\u020C:"O",\u020D:"o",\u0210:"R",\u0211:"r",\u0214:"U",\u0215:"u",B\u030C:"B",b\u030C:"b",\u010C\u0323:"C",\u010D\u0323:"c",\u00CA\u030C:"E",\u00EA\u030C:"e",F\u030C:"F",f\u030C:"f",\u01E6:"G",\u01E7:"g",\u021E:"H",\u021F:"h",J\u030C:"J",\u01F0:"j",\u01E8:"K",\u01E9:"k",M\u030C:"M",m\u030C:"m",P\u030C:"P",p\u030C:"p",Q\u030C:"Q",q\u030C:"q",\u0158\u0329:"R",\u0159\u0329:"r",\u1E66:"S",\u1E67:"s",V\u030C:"V",v\u030C:"v",W\u030C:"W",w\u030C:"w",X\u030C:"X",x\u030C:"x",Y\u030C:"Y",y\u030C:"y",A\u0327:"A",a\u0327:"a",B\u0327:"B",b\u0327:"b",\u1E10:"D",\u1E11:"d",\u0228:"E",\u0229:"e",\u0190\u0327:"E",\u025B\u0327:"e",\u1E28:"H",\u1E29:"h",I\u0327:"I",i\u0327:"i",\u0197\u0327:"I",\u0268\u0327:"i",M\u0327:"M",m\u0327:"m",O\u0327:"O",o\u0327:"o",Q\u0327:"Q",q\u0327:"q",U\u0327:"U",u\u0327:"u",X\u0327:"X",x\u0327:"x",Z\u0327:"Z",z\u0327:"z"},t=Object.keys(l).join("|"),e=new RegExp(t,"g"),a=new RegExp(t,""),c=function(d){return d.replace(e,function(f){return l[f]})},i=function(d){return!!d.match(a)};T.exports=c,T.exports.has=i,T.exports.remove=c},22265:(T,l,t)=>{"use strict";Object.defineProperty(l,Symbol.toStringTag,{value:"Module"});const e=t(92132),a=t(21272),c=t(73725),i=({children:d,...f})=>{const h=a.Children.toArray(d).map((u,v)=>a.isValidElement(u)?a.cloneElement(u,{"aria-colindex":v+1,coords:{col:v+1,row:f["aria-rowindex"]}}):u);return e.jsx(c.Box,{as:"tr",...f,children:h})};l.RawTr=i},29884:(T,l,t)=>{var e=t(97449),a=t(91522);function c(i,d){var f=-1,h=a(i)?Array(i.length):[];return e(i,function(u,v,P){h[++f]=d(u,v,P)}),h}T.exports=c},30803:(T,l,t)=>{"use strict";const e=t(92132),a=i=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1rem",height:"1rem",fill:"none",viewBox:"0 0 24 24",...i,children:e.jsx("path",{fill:"#212134",fillRule:"evenodd",d:"M2.68 9.192c-.6.276-2.114 1.18-2.306 1.303a.792.792 0 0 0-.374.68v1.65a.797.797 0 0 0 .384.687c.254.16 1.73 1.042 2.306 1.303l.744 1.8c-.24.634-.67 2.333-.72 2.554a.797.797 0 0 0 .216.744l1.167 1.166a.801.801 0 0 0 .744.216l.03-.008c.36-.092 1.946-.498 2.523-.712l1.8.744c.276.6 1.181 2.115 1.304 2.307a.805.805 0 0 0 .679.374h1.649a.797.797 0 0 0 .686-.384c.16-.254 1.042-1.73 1.303-2.306l1.8-.744c.634.24 2.333.67 2.554.72a.797.797 0 0 0 .744-.216l1.166-1.167a.803.803 0 0 0 .216-.744l-.008-.03c-.092-.36-.498-1.946-.712-2.523l.744-1.8c.6-.276 2.115-1.181 2.307-1.304a.804.804 0 0 0 .374-.679v-1.649a.796.796 0 0 0-.382-.679c-.254-.16-1.73-1.041-2.306-1.303l-.744-1.8c.24-.634.67-2.333.72-2.554a.796.796 0 0 0-.216-.744l-1.166-1.173a.802.802 0 0 0-.744-.216l-.03.008c-.361.092-1.947.498-2.524.712l-1.8-.744c-.276-.6-1.18-2.115-1.303-2.307a.803.803 0 0 0-.68-.374h-1.65a.797.797 0 0 0-.68.382c-.16.254-1.041 1.73-1.303 2.306l-1.8.744c-.634-.24-2.333-.67-2.554-.72a.797.797 0 0 0-.744.216L2.921 4.094a.802.802 0 0 0-.216.744l.008.03c.092.361.498 1.947.712 2.524l-.744 1.8ZM12 17a5 5 0 1 0 0-10 5 5 0 0 0 0 10Z",clipRule:"evenodd"})}),c=a;T.exports=c},33333:(T,l,t)=>{"use strict";Object.defineProperty(l,Symbol.toStringTag,{value:"Module"});const e=t(92132),a=t(21272),c=({children:i,...d})=>{const f=a.Children.toArray(i).map(h=>a.isValidElement(h)?a.cloneElement(h,{"aria-rowindex":1}):h);return e.jsx("thead",{...d,children:f})};l.RawThead=c},34542:(T,l,t)=>{var e=t(87864),a=t(45353),c=t(29884),i=t(82261);function d(f,h){var u=i(f)?e:c;return u(f,a(h,3))}T.exports=d},36735:(T,l,t)=>{"use strict";Object.defineProperty(l,Symbol.toStringTag,{value:"Module"});const e=t(92132),a=t(63891),c=t(22265),f=(u=>u&&u.__esModule?u:{default:u})(a).default(c.RawTr)`
  border-bottom: 1px solid ${({theme:u})=>u.colors.neutral150};

  & td,
  & th {
    padding: ${({theme:u})=>u.spaces[4]};
  }

  & td:first-of-type,
  & th:first-of-type {
    padding: 0 ${({theme:u})=>u.spaces[1]};
  }

  // Resetting padding values and fixing a height
  th {
    padding-top: 0;
    padding-bottom: 0;
    height: ${56/16}rem;
  }
`,h=u=>e.jsx(f,{...u});l.Tr=h},38807:(T,l,t)=>{"use strict";Object.defineProperty(l,Symbol.toStringTag,{value:"Module"});const e=t(92132),a=t(21272),c=t(55985),i=t(14096),d=t(54191),f=({colCount:h,rowCount:u,jumpStep:v=3,initialCol:P=0,initialRow:L=0,...m})=>{const S=a.useRef(null),K=a.useRef(!1),[U,R]=a.useState(L),[N,H]=a.useState(P),I=a.useCallback(({colIndex:y,rowIndex:j})=>{H(y),R(j)},[]);a.useEffect(()=>{K.current&&c.focusFocusable(S.current),K.current||(K.current=!0)},[N,U]);const O=y=>{switch(y.key){case d.KeyboardKeys.RIGHT:{y.preventDefault(),H(j=>j<h-1?j+1:j);break}case d.KeyboardKeys.LEFT:{y.preventDefault(),H(j=>j>0?j-1:j);break}case d.KeyboardKeys.UP:{y.preventDefault(),R(j=>j>0?j-1:j);break}case d.KeyboardKeys.DOWN:{y.preventDefault(),R(j=>j<u-1?j+1:j);break}case d.KeyboardKeys.HOME:{y.preventDefault(),y.ctrlKey&&R(0),H(0);break}case d.KeyboardKeys.END:{y.preventDefault(),y.ctrlKey&&R(u-1),H(h-1);break}case d.KeyboardKeys.PAGE_DOWN:{y.preventDefault(),R(j=>j+v<u?j+v:u-1);break}case d.KeyboardKeys.PAGE_UP:{y.preventDefault(),R(j=>j-v>0?j-v:0);break}}},b=a.useMemo(()=>({rowIndex:U,colIndex:N,setTableValues:I}),[N,U,I]);return e.jsx(i.RawTableContext.Provider,{value:b,children:e.jsx("table",{role:"grid",ref:S,"aria-rowcount":u,"aria-colcount":h,onKeyDown:O,...m})})};l.RawTable=f},41420:(T,l,t)=>{"use strict";const e=t(92132),a=i=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1rem",height:"1rem",fill:"none",viewBox:"0 0 24 24",...i,children:e.jsx("path",{fill:"#212134",d:"M24 13.3a.2.2 0 0 1-.2.2H5.74l8.239 8.239a.2.2 0 0 1 0 .282L12.14 23.86a.2.2 0 0 1-.282 0L.14 12.14a.2.2 0 0 1 0-.282L11.86.14a.2.2 0 0 1 .282 0L13.98 1.98a.2.2 0 0 1 0 .282L5.74 10.5H23.8c.11 0 .2.09.2.2v2.6Z"})}),c=a;T.exports=c},44575:(T,l,t)=>{"use strict";Object.defineProperty(l,Symbol.toStringTag,{value:"Module"});const e=t(92132),a=t(21272),c=t(14096),i=t(11193),d=t(54191),f=t(73725),h=v=>e.jsx(u,{...v,as:"th"}),u=({coords:v={col:0,row:0},as:P="td",...L})=>{const m=a.useRef(null),{rowIndex:S,colIndex:K,setTableValues:U}=c.useTable(),[R,N]=a.useState(!1),H=b=>{const y=i.getFocusableNodes(m.current,!0);if(y.length===0||y.length===1&&i.getFocusableNodesWithKeyboardNav(y).length===0)return;if(y.length>1&&!y.find(W=>W.tagName!=="BUTTON")){b.preventDefault();const W=y.findIndex(V=>V===document.activeElement);if(b.key===d.KeyboardKeys.RIGHT){const V=y[W+1];V&&(b.stopPropagation(),V.focus())}else if(b.key===d.KeyboardKeys.LEFT){const V=y[W-1];V&&(b.stopPropagation(),V.focus())}return}const j=b.key===d.KeyboardKeys.ENTER;if(j&&!R)N(!0);else if((b.key===d.KeyboardKeys.ESCAPE||j)&&R){if(j&&document.activeElement?.tagName==="A")return;N(!1),m.current.focus()}else R&&b.stopPropagation()},I=S===v.row-1&&K===v.col-1;a.useLayoutEffect(()=>{const b=i.getFocusableNodes(m.current,!0);b.length===0||b.length===1&&i.getFocusableNodesWithKeyboardNav(b).length!==0||b.length>1&&Boolean(b.find(y=>y.tagName!=="BUTTON"))?(m.current.setAttribute("tabIndex",!R&&I?"0":"-1"),b.forEach((y,j)=>{y.setAttribute("tabIndex",R?"0":"-1"),R&&j===0&&y.focus()})):b.forEach(y=>{y.setAttribute("tabIndex",I?"0":"-1")})},[R,I]);const O=a.useCallback(()=>{const b=i.getFocusableNodes(m.current,!0);b.length>=1&&(i.getFocusableNodesWithKeyboardNav(b).length!==0||!b.find(y=>y.tagName!=="BUTTON"))&&N(!0),U({rowIndex:v.row-1,colIndex:v.col-1})},[v,U]);return a.useLayoutEffect(()=>{const b=m.current;return i.getFocusableNodes(b,!0).forEach(j=>{j.addEventListener("focus",O)}),()=>{i.getFocusableNodes(b,!0).forEach(W=>{W.removeEventListener("focus",O)})}},[O]),e.jsx(f.Box,{role:"gridcell",as:P,ref:m,onKeyDown:H,...L})};l.RawTd=u,l.RawTh=h},45635:(T,l,t)=>{var e=t(87212),a=t(4191),c=t(39226),i=t(3956),d=c(function(f,h){if(f==null)return[];var u=h.length;return u>1&&i(f,h[0],h[1])?h=[]:u>2&&i(h[0],h[1],h[2])&&(h=[h[0]]),a(f,e(h,1),[])});T.exports=d},46825:(T,l,t)=>{"use strict";t.r(l),t.d(l,{default:()=>Nt});var e=t(58827),a=t(21272),c=t(17703),i=t(91356),d=t(4655),f=t(37421),h=t(93995),u=t(98133),v=t(72178),P=t(90265),L=t(52120),m=t(58494),S=t(69414),K=t(84394),U=t.n(K),R=t(54894),N=t(74930),H=t(25354),I=t(20094),O=t.n(I),b={CASE_SENSITIVE_EQUAL:9,EQUAL:8,STARTS_WITH:7,WORD_STARTS_WITH:6,STRING_CASE:5,STRING_CASE_ACRONYM:4,CONTAINS:3,ACRONYM:2,MATCHES:1,NO_MATCH:0},y={CAMEL:.8,PASCAL:.6,KEBAB:.4,SNAKE:.2,NO_CASE:0};W.rankings=b,W.caseRankings=y;var j=function(s,n){return String(s.rankedItem).localeCompare(n.rankedItem)};function W(s,n,o){o===void 0&&(o={});var r=o,p=r.keys,g=r.threshold,E=g===void 0?b.MATCHES:g,C=r.baseSort,A=C===void 0?j:C,D=s.reduce(F,[]);return D.sort(function(B,x){return ke(B,x,A)}).map(function(B){var x=B.item;return x});function F(B,x,k){var M=V(x,p,n,o),w=M.rankedItem,G=M.rank,z=M.keyIndex,ee=M.keyThreshold,ie=ee===void 0?E:ee;return G>=ie&&B.push({rankedItem:w,item:x,rank:G,index:k,keyIndex:z}),B}}function V(s,n,o,r){if(!n)return{rankedItem:s,rank:ne(s,o,r),keyIndex:-1,keyThreshold:r.threshold};var p=Ie(s,n);return p.reduce(function(g,E,C){var A=g.rank,D=g.rankedItem,F=g.keyIndex,B=g.keyThreshold,x=E.itemValue,k=E.attributes,M=ne(x,o,r),w=D,G=k.minRanking,z=k.maxRanking,ee=k.threshold;return M<G&&M>=b.MATCHES?M=G:M>z&&(M=z),M>A&&(A=M,F=C,B=ee,w=x),{rankedItem:w,rank:A,keyIndex:F,keyThreshold:B}},{rank:b.NO_MATCH,keyIndex:-1,keyThreshold:r.threshold})}function ne(s,n,o){if(s=fe(s,o),n=fe(n,o),n.length>s.length)return b.NO_MATCH;if(s===n)return b.CASE_SENSITIVE_EQUAL;var r=se(s),p=Be(s,n,r),g=Oe(s,n,r);return s=s.toLowerCase(),n=n.toLowerCase(),s===n?b.EQUAL+r:s.indexOf(n)===0?b.STARTS_WITH+r:s.indexOf(" "+n)!==-1?b.WORD_STARTS_WITH+r:p?b.STRING_CASE+r:r>0&&g?b.STRING_CASE_ACRONYM+r:s.indexOf(n)!==-1?b.CONTAINS+r:n.length===1?b.NO_MATCH:te(s).indexOf(n)!==-1?b.ACRONYM+r:Fe(s,n)}function te(s){var n="",o=s.split(" ");return o.forEach(function(r){var p=r.split("-");p.forEach(function(g){n+=g.substr(0,1)})}),n}function se(s){var n=s.toLowerCase()!==s,o=s.indexOf("-")>=0,r=s.indexOf("_")>=0;if(!n&&!r&&o)return y.KEBAB;if(!n&&r&&!o)return y.SNAKE;if(n&&!o&&!r){var p=s[0].toUpperCase()===s[0];return p?y.PASCAL:y.CAMEL}return y.NO_CASE}function Be(s,n,o){var r=s.toLowerCase().indexOf(n.toLowerCase());switch(o){case y.SNAKE:return s[r-1]==="_";case y.KEBAB:return s[r-1]==="-";case y.PASCAL:case y.CAMEL:return r!==-1&&s[r]===s[r].toUpperCase();default:return!1}}function Oe(s,n,o){var r=null;switch(o){case y.SNAKE:r="_";break;case y.KEBAB:r="-";break;case y.PASCAL:case y.CAMEL:r=/(?=[A-Z])/;break;default:r=null}var p=s.split(r);return n.toLowerCase().split("").reduce(function(g,E,C){var A=p[C];return g&&A&&A[0].toLowerCase()===E},!0)}function Fe(s,n){var o=0,r=0;function p(B,x,k){for(var M=k;M<x.length;M++){var w=x[M];if(w===B)return o+=1,M+1}return-1}function g(B){var x=o/n.length,k=b.MATCHES+x*(1/B);return k}var E=p(n[0],s,0);if(E<0)return b.NO_MATCH;r=E;for(var C=1;C<n.length;C++){var A=n[C];r=p(A,s,r);var D=r>-1;if(!D)return b.NO_MATCH}var F=r-E;return g(F)}function ke(s,n,o){var r=-1,p=1,g=s.rank,E=s.keyIndex,C=n.rank,A=n.keyIndex;return g===C?E===A?o(s,n):E<A?r:p:g>C?r:p}function fe(s,n){var o=n.keepDiacritics;return s=""+s,o||(s=O()(s)),s}function Ne(s,n){typeof n=="object"&&(n=n.key);var o;return typeof n=="function"?o=n(s):n.indexOf(".")!==-1?o=n.split(".").reduce(function(r,p){return r?r[p]:null},s):o=s[n],o!=null?[].concat(o):null}function Ie(s,n){return n.reduce(function(o,r){var p=Ne(s,r);return p&&p.forEach(function(g){o.push({itemValue:g,attributes:we(r)})}),o},[])}function we(s){return typeof s=="string"&&(s={key:s}),(0,H.A)({maxRanking:1/0,minRanking:-1/0},s)}const Ue=W;var J=t(56914);const Ge=async(s,n)=>{try{const{data:o}=await J.SP.get((0,J.X3)("roles"));return n("The roles have loaded successfully"),o}catch{throw s({type:"warning",message:{id:"notification.error"}}),new Error("error")}},$e=async(s,n)=>{try{await J.SP.delete(`${(0,J.X3)("roles")}/${s}`)}catch{n({type:"warning",message:{id:"notification.error",defaultMessage:"An error occured"}})}};var Ke=t(33544),$=t.n(Ke),me=t(93802),le=t(55080),He=t(8895),We=t.n(He),Ve=t(6634),Ye=t.n(Ve);const ce=({sortedRoles:s,canDelete:n,permissions:o,setRoleToDelete:r,onDelete:p})=>{const{formatMessage:g}=(0,R.A)(),{push:E}=(0,c.W6)(),[C,A]=p,D=x=>n&&!["public","authenticated"].includes(x.type),F=x=>{r(x),A(!C)},B=x=>{E(`/settings/${d.A}/roles/${x}`)};return(0,e.jsx)(P.Tbody,{children:s?.map(x=>(0,e.jsxs)(P.Tr,{...(0,i.onRowClick)({fn:()=>B(x.id)}),children:[(0,e.jsx)(P.Td,{width:"20%",children:(0,e.jsx)(m.Typography,{children:x.name})}),(0,e.jsx)(P.Td,{width:"50%",children:(0,e.jsx)(m.Typography,{children:x.description})}),(0,e.jsx)(P.Td,{width:"30%",children:(0,e.jsx)(m.Typography,{children:`${x.nb_users} ${g({id:"global.users",defaultMessage:"users"}).toLowerCase()}`})}),(0,e.jsx)(P.Td,{children:(0,e.jsxs)(le.Flex,{justifyContent:"end",...i.stopPropagation,children:[(0,e.jsx)(i.CheckPermissions,{permissions:o.updateRole,children:(0,e.jsx)(me.IconButton,{onClick:()=>B(x.id),noBorder:!0,icon:(0,e.jsx)(We(),{}),label:g({id:"app.component.table.edit",defaultMessage:"Edit {target}"},{target:`${x.name}`})})}),D(x)&&(0,e.jsx)(i.CheckPermissions,{permissions:o.deleteRole,children:(0,e.jsx)(me.IconButton,{onClick:()=>F(x.id),noBorder:!0,icon:(0,e.jsx)(Ye(),{}),label:g({id:"global.delete-target",defaultMessage:"Delete {target}"},{target:`${x.name}`})})})]})})]},x.name))})},Qe=ce;ce.defaultProps={canDelete:!1},ce.propTypes={onDelete:$().array.isRequired,permissions:$().object.isRequired,setRoleToDelete:$().func.isRequired,sortedRoles:$().array.isRequired,canDelete:$().bool};const ze=()=>{const{trackUsage:s}=(0,i.useTracking)(),{formatMessage:n}=(0,R.A)(),{push:o}=(0,c.W6)(),r=(0,i.useNotification)(),{notifyStatus:p}=(0,S.useNotifyAT)(),[{query:g}]=(0,i.useQueryParams)(),E=g?._q||"",[C,A]=(0,a.useState)(!1),[D,F]=(0,a.useState)(!1),[B,x]=(0,a.useState)();(0,i.useFocusWhenNavigate)();const k=(0,N.useQueryClient)(),M=(0,a.useMemo)(()=>({create:f.A.createRole,read:f.A.readRoles,update:f.A.updateRole,delete:f.A.deleteRole}),[]),{isLoading:w,allowedActions:{canRead:G,canDelete:z}}=(0,i.useRBAC)(M),{isLoading:ee,data:{roles:ie},isFetching:It}=(0,N.useQuery)("get-roles",()=>Ge(r,p),{initialData:{},enabled:G}),Le=ee||It,wt=()=>{s("willCreateRole"),o(`/settings/${d.A}/roles/new`)},Ut=()=>{A(!C)},Gt={roles:{id:(0,J.gT)("Roles.empty"),defaultMessage:"You don't have any roles yet."},search:{id:(0,J.gT)("Roles.empty.search"),defaultMessage:"No roles match the search."}},$t=n({id:"global.roles",defaultMessage:"Roles"}),Kt=(0,N.useMutation)(Qt=>$e(Qt,r),{onSuccess:async()=>{await k.invalidateQueries("get-roles")}}),Ht=async()=>{F(!0),await Kt.mutateAsync(B),A(!C),F(!1)},ue=Ue(ie||[],E,{keys:["name","description"]}),Wt=E&&!ue.length?"search":"roles",Vt=4,Yt=(ie?.length||0)+1;return(0,e.jsxs)(u.Layout,{children:[(0,e.jsx)(i.SettingsPageTitle,{name:$t}),(0,e.jsxs)(v.Main,{"aria-busy":Le,children:[(0,e.jsx)(u.HeaderLayout,{title:n({id:"global.roles",defaultMessage:"Roles"}),subtitle:n({id:"Settings.roles.list.description",defaultMessage:"List of roles"}),primaryAction:(0,e.jsx)(i.CheckPermissions,{permissions:f.A.createRole,children:(0,e.jsx)(h.Button,{onClick:wt,startIcon:(0,e.jsx)(U(),{}),size:"L",children:n({id:(0,J.gT)("List.button.roles"),defaultMessage:"Add new role"})})})}),(0,e.jsx)(u.ActionLayout,{startActions:(0,e.jsx)(i.SearchURLQuery,{label:n({id:"app.component.search.label",defaultMessage:"Search"})})}),(0,e.jsxs)(u.ContentLayout,{children:[!G&&(0,e.jsx)(i.NoPermissions,{}),(Le||w)&&(0,e.jsx)(i.LoadingIndicatorPage,{}),G&&ue&&ue?.length?(0,e.jsxs)(P.Table,{colCount:Vt,rowCount:Yt,children:[(0,e.jsx)(P.Thead,{children:(0,e.jsxs)(P.Tr,{children:[(0,e.jsx)(P.Th,{children:(0,e.jsx)(m.Typography,{variant:"sigma",textColor:"neutral600",children:n({id:"global.name",defaultMessage:"Name"})})}),(0,e.jsx)(P.Th,{children:(0,e.jsx)(m.Typography,{variant:"sigma",textColor:"neutral600",children:n({id:"global.description",defaultMessage:"Description"})})}),(0,e.jsx)(P.Th,{children:(0,e.jsx)(m.Typography,{variant:"sigma",textColor:"neutral600",children:n({id:"global.users",defaultMessage:"Users"})})}),(0,e.jsx)(P.Th,{children:(0,e.jsx)(L.VisuallyHidden,{children:n({id:"global.actions",defaultMessage:"Actions"})})})]})}),(0,e.jsx)(Qe,{sortedRoles:ue,canDelete:z,permissions:f.A,setRoleToDelete:x,onDelete:[C,A]})]}):(0,e.jsx)(i.EmptyStateLayout,{content:Gt[Wt]})]}),(0,e.jsx)(i.ConfirmDialog,{isConfirmButtonLoading:D,onConfirm:Ht,onToggleDialog:Ut,isOpen:C})]})]})},Ze=()=>(0,e.jsx)(i.CheckPagePermissions,{permissions:f.A.accessRoles,children:(0,e.jsx)(ze,{})});var pe=t(61535),Y=t(70505),Z=t(19016),xe=t(20628),ye=t(66521),Xe=t(41420),Je=t.n(Xe),qe=t(62328),Ee=t.n(qe),Q=t(4527),q=t(97552),X=t(50707);const Ce=(0,a.createContext)({}),Ae=({children:s,value:n})=>(0,e.jsx)(Ce.Provider,{value:n,children:s}),de=()=>(0,a.useContext)(Ce);Ae.propTypes={children:$().node.isRequired,value:$().object.isRequired};var oe=t(63891),_e=t(34542),et=t.n(_e),tt=t(61468),st=t.n(tt);const nt=s=>{switch(s){case"POST":return{text:"success600",border:"success200",background:"success100"};case"GET":return{text:"secondary600",border:"secondary200",background:"secondary100"};case"PUT":return{text:"warning600",border:"warning200",background:"warning100"};case"DELETE":return{text:"danger600",border:"danger200",background:"danger100"};default:return{text:"neutral600",border:"neutral200",background:"neutral100"}}},ot=(0,oe.default)(Z.Box)`
  margin: -1px;
  border-radius: ${({theme:s})=>s.spaces[1]} 0 0 ${({theme:s})=>s.spaces[1]};
`;function ge({route:s}){const{formatMessage:n}=(0,R.A)(),{method:o,handler:r,path:p}=s,g=p?st()(p.split("/")):[],[E="",C=""]=r?r.split("."):[],A=nt(s.method);return(0,e.jsxs)(Y.Stack,{spacing:2,children:[(0,e.jsxs)(m.Typography,{variant:"delta",as:"h3",children:[n({id:"users-permissions.BoundRoute.title",defaultMessage:"Bound route to"}),"\xA0",(0,e.jsx)("span",{children:E}),(0,e.jsxs)(m.Typography,{variant:"delta",textColor:"primary600",children:[".",C]})]}),(0,e.jsxs)(Y.Stack,{horizontal:!0,hasRadius:!0,background:"neutral0",borderColor:"neutral200",spacing:0,children:[(0,e.jsx)(ot,{background:A.background,borderColor:A.border,padding:2,children:(0,e.jsx)(m.Typography,{fontWeight:"bold",textColor:A.text,children:o})}),(0,e.jsx)(Z.Box,{paddingLeft:2,paddingRight:2,children:et()(g,D=>(0,e.jsxs)(m.Typography,{textColor:D.includes(":")?"neutral600":"neutral900",children:["/",D]},D))})]})]})}ge.defaultProps={route:{handler:"Nocontroller.error",method:"GET",path:"/there-is-no-path"}},ge.propTypes={route:$().shape({handler:$().string,method:$().string,path:$().string})};const at=ge,rt=()=>{const{formatMessage:s}=(0,R.A)(),{selectedAction:n,routes:o}=de(),r=(0,X.without)(n.split("."),"controllers"),p=(0,X.get)(o,r[0]),g=r.slice(1).join("."),E=(0,X.isEmpty)(p)?[]:p.filter(C=>C.handler.endsWith(g));return(0,e.jsx)(Q.GridItem,{col:5,background:"neutral150",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7,style:{minHeight:"100%"},children:n?(0,e.jsx)(Y.Stack,{spacing:2,children:E.map((C,A)=>(0,e.jsx)(at,{route:C},A))}):(0,e.jsxs)(Y.Stack,{spacing:2,children:[(0,e.jsx)(m.Typography,{variant:"delta",as:"h3",children:s({id:"users-permissions.Policies.header.title",defaultMessage:"Advanced settings"})}),(0,e.jsx)(m.Typography,{as:"p",textColor:"neutral600",children:s({id:"users-permissions.Policies.header.hint",defaultMessage:"Select the application's actions or the plugin's actions and click on the cog icon to display the bound route"})})]})})};var he=t(94595),it=t(39404),ut=t.n(it);function lt(s){switch(s){case"application":return"Application";case"plugin::content-manager":return"Content manager";case"plugin::content-type-builder":return"Content types builder";case"plugin::documentation":return"Documentation";case"plugin::email":return"Email";case"plugin::i18n":return"i18n";case"plugin::upload":return"Upload";case"plugin::users-permissions":return"Users-permissions";default:return ut()(s.replace("api::","").replace("plugin::",""))}}const ct=lt;var dt=t(45635),be=t.n(dt),Te=t(3330),gt=t(30803),ht=t.n(gt);const ve=(0,oe.css)`
  background: ${s=>s.theme.colors.primary100};
  svg {
    opacity: 1;
  }
`,ft=(0,oe.default)(Z.Box)`
  display: flex;
  justify-content: space-between;
  align-items: center;

  svg {
    opacity: 0;
    path {
      fill: ${s=>s.theme.colors.primary600};
    }
  }

  /* Show active style both on hover and when the action is selected */
  ${s=>s.isActive&&ve}
  &:hover {
    ${ve}
  }
`,mt=oe.default.div`
  flex: 1;
  align-self: center;
  border-top: 1px solid ${({theme:s})=>s.colors.neutral150};
`,je=({subCategory:s})=>{const{formatMessage:n}=(0,R.A)(),{onChange:o,onChangeSelectAll:r,onSelectedAction:p,selectedAction:g,modifiedData:E}=de(),C=(0,a.useMemo)(()=>(0,X.get)(E,s.name,{}),[E,s]),A=(0,a.useMemo)(()=>Object.values(C).every(x=>x.enabled===!0),[C]),D=(0,a.useMemo)(()=>Object.values(C).some(x=>x.enabled===!0)&&!A,[C,A]),F=(0,a.useCallback)(({target:{name:x}})=>{r({target:{name:x,value:!A}})},[A,r]),B=(0,a.useCallback)(x=>g===x,[g]);return(0,e.jsxs)(Z.Box,{children:[(0,e.jsxs)(le.Flex,{justifyContent:"space-between",alignItems:"center",children:[(0,e.jsx)(Z.Box,{paddingRight:4,children:(0,e.jsx)(m.Typography,{variant:"sigma",textColor:"neutral600",children:s.label})}),(0,e.jsx)(mt,{}),(0,e.jsx)(Z.Box,{paddingLeft:4,children:(0,e.jsx)(Te.Checkbox,{name:s.name,value:A,onValueChange:x=>F({target:{name:s.name,value:x}}),indeterminate:D,children:n({id:"app.utils.select-all",defaultMessage:"Select all"})})})]}),(0,e.jsx)(le.Flex,{paddingTop:6,paddingBottom:6,children:(0,e.jsx)(Q.Grid,{gap:2,style:{flex:1},children:s.actions.map(x=>{const k=`${x.name}.enabled`;return(0,e.jsx)(Q.GridItem,{col:6,children:(0,e.jsxs)(ft,{isActive:B(x.name),padding:2,hasRadius:!0,children:[(0,e.jsx)(Te.Checkbox,{value:(0,X.get)(E,k,!1),name:k,onValueChange:M=>o({target:{name:k,value:M}}),children:x.label}),(0,e.jsx)("button",{type:"button","data-testid":"action-cog",onClick:()=>p(x.name),style:{display:"inline-flex",alignItems:"center"},children:(0,e.jsx)(ht(),{})})]})},x.name)})})})]})};je.propTypes={subCategory:$().object.isRequired};const pt=je,Re=({name:s,permissions:n})=>{const o=(0,a.useMemo)(()=>be()(Object.values(n.controllers).reduce((r,p,g)=>{const E=`${s}.controllers.${Object.keys(n.controllers)[g]}`,C=be()(Object.keys(p).reduce((A,D)=>[...A,{...p[D],label:D,name:`${E}.${D}`}],[]),"label");return[...r,{actions:C,label:Object.keys(n.controllers)[g],name:E}]},[]),"label"),[s,n]);return(0,e.jsx)(Z.Box,{padding:6,children:o.map(r=>(0,e.jsx)(pt,{subCategory:r},r.name))})};Re.propTypes={name:$().string.isRequired,permissions:$().object.isRequired};const xt=Re,yt=(s,n)=>{const o=Object.keys(n).sort().map(r=>({name:r,isOpen:!1}));return{...s,collapses:o}};var ae=t(88761);const Et={collapses:[]},Ct=(s,n)=>(0,ae.Ay)(s,o=>{switch(n.type){case"TOGGLE_COLLAPSE":{o.collapses=s.collapses.map((r,p)=>p===n.index?{...r,isOpen:!r.isOpen}:{...r,isOpen:!1});break}default:return o}}),At=()=>{const{modifiedData:s}=de(),{formatMessage:n}=(0,R.A)(),[{collapses:o},r]=(0,a.useReducer)(Ct,Et,g=>yt(g,s)),p=g=>r({type:"TOGGLE_COLLAPSE",index:g});return(0,e.jsx)(Y.Stack,{spacing:1,children:o.map((g,E)=>(0,e.jsxs)(he.Accordion,{expanded:g.isOpen,onToggle:()=>p(E),variant:E%2===0?"secondary":void 0,children:[(0,e.jsx)(he.AccordionToggle,{title:ct(g.name),description:n({id:"users-permissions.Plugin.permissions.plugins.description",defaultMessage:"Define all allowed actions for the {name} plugin."},{name:g.name}),variant:E%2?"primary":"secondary"}),(0,e.jsx)(he.AccordionContent,{children:(0,e.jsx)(Z.Box,{children:(0,e.jsx)(xt,{permissions:s[g.name],name:g.name})})})]},g.name))})},bt={initialData:{},modifiedData:{},routes:{},selectedAction:"",policies:[]},Tt=(s,n)=>(0,ae.Ay)(s,o=>{switch(n.type){case"ON_CHANGE":{const r=n.keys.length,p=n.keys[r-1]==="enabled";if(n.value&&p){const g=(0,X.take)(n.keys,r-1).join(".");o.selectedAction=g}(0,X.set)(o,["modifiedData",...n.keys],n.value);break}case"ON_CHANGE_SELECT_ALL":{const r=["modifiedData",...n.keys],p=(0,X.get)(s,r,{}),g=Object.keys(p).reduce((E,C)=>(E[C]={...p[C],enabled:n.value},E),{});(0,X.set)(o,r,g);break}case"ON_RESET":{o.modifiedData=s.initialData;break}case"ON_SUBMIT_SUCCEEDED":{o.initialData=s.modifiedData;break}case"SELECT_ACTION":{const{actionToSelect:r}=n;o.selectedAction=r===s.selectedAction?"":r;break}default:return o}}),vt=(s,n,o)=>({...s,initialData:n,modifiedData:n,routes:o}),De=(0,a.forwardRef)(({permissions:s,routes:n},o)=>{const{formatMessage:r}=(0,R.A)(),[p,g]=(0,a.useReducer)(Tt,bt,F=>vt(F,s,n));(0,a.useImperativeHandle)(o,()=>({getPermissions:()=>({permissions:p.modifiedData}),resetForm:()=>{g({type:"ON_RESET"})},setFormAfterSubmit:()=>{g({type:"ON_SUBMIT_SUCCEEDED"})}}));const D={...p,onChange:({target:{name:F,value:B}})=>g({type:"ON_CHANGE",keys:F.split("."),value:B==="empty__string_value"?"":B}),onChangeSelectAll:({target:{name:F,value:B}})=>g({type:"ON_CHANGE_SELECT_ALL",keys:F.split("."),value:B}),onSelectedAction:F=>g({type:"SELECT_ACTION",actionToSelect:F})};return(0,e.jsx)(Ae,{value:D,children:(0,e.jsxs)(Q.Grid,{gap:0,shadow:"filterShadow",hasRadius:!0,background:"neutral0",children:[(0,e.jsx)(Q.GridItem,{col:7,paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7,children:(0,e.jsxs)(Y.Stack,{spacing:6,children:[(0,e.jsxs)(Y.Stack,{spacing:2,children:[(0,e.jsx)(m.Typography,{variant:"delta",as:"h2",children:r({id:(0,q.A)("Plugins.header.title"),defaultMessage:"Permissions"})}),(0,e.jsx)(m.Typography,{as:"p",textColor:"neutral600",children:r({id:(0,q.A)("Plugins.header.description"),defaultMessage:"Only actions bound by a route are listed below."})})]}),(0,e.jsx)(At,{})]})}),(0,e.jsx)(rt,{})]})})});De.propTypes={permissions:$().object.isRequired,routes:$().object.isRequired};const Se=(0,a.memo)(De),ns={isLoading:!0,modifiedData:{}},os=(s,n)=>produce(s,o=>{switch(n.type){case"GET_DATA":{o.isLoading=!0,o.modifiedData={};break}case"GET_DATA_SUCCEEDED":{o.isLoading=!1,o.modifiedData=n.data;break}case"GET_DATA_ERROR":{o.isLoading=!0;break}case"ON_SUBMIT_SUCCEEDED":{o.modifiedData=n.data;break}default:return o}}),as=null,rs=(s,n)=>{const{isLoading:o,allowedActions:r}=useRBAC(n),[{isLoading:p,modifiedData:g},E]=useReducer(reducer,initialState),C=useNotification(),A=useRef(!0),D=new AbortController,{signal:F}=D;useEffect(()=>(o||(async()=>{try{E({type:"GET_DATA"});const k=await request(getRequestURL(s),{method:"GET",signal:F});E({type:"GET_DATA_SUCCEEDED",data:k})}catch(k){A.current&&(E({type:"GET_DATA_ERROR"}),console.error(k),C({type:"warning",message:{id:"notification.error"}}))}})(),()=>{D.abort(),A.current=!1}),[o,s]);const B=useCallback(x=>{E({type:"ON_SUBMIT_SUCCEEDED",data:x})},[]);return{allowedActions:r,dispatchSubmitSucceeded:B,isLoading:p,isLoadingForPermissions:o,modifiedData:g}},is=null,us={roles:[],isLoading:!0},ls=(s,n)=>produce(s,o=>{switch(n.type){case"GET_DATA":{o.isLoading=!0,o.roles=[];break}case"GET_DATA_SUCCEEDED":{o.roles=n.data,o.isLoading=!1;break}case"GET_DATA_ERROR":{o.isLoading=!1;break}default:return o}}),cs=null,ds=(s=!0)=>{const[{roles:n,isLoading:o},r]=useReducer(reducer,initialState,()=>init(initialState,s)),p=useNotification(),g=useRef(!0),E=new AbortController,{signal:C}=E;useEffect(()=>(s&&A(),()=>{E.abort(),g.current=!1}),[s]);const A=async()=>{try{r({type:"GET_DATA"});const{roles:D}=await request(`/${pluginId}/roles`,{method:"GET",signal:C});r({type:"GET_DATA_SUCCEEDED",data:D})}catch(D){const F=get(D,["response","payload","message"],"An error occured");g.current&&(r({type:"GET_DATA_ERROR"}),F!=="Forbidden"&&p({type:"warning",message:F}))}};return{roles:n,isLoading:o,getData:A}},gs=null,jt=(s,n)=>({...s,isLoading:n});var re=t(76126);const Pe={permissions:{},routes:{},isLoading:!0},Rt=(s,n)=>(0,ae.Ay)(s,o=>{switch(n.type){case"GET_DATA":{o.isLoading=!0,o.permissions={},o.routes={};break}case"GET_DATA_SUCCEEDED":{o.permissions=n.permissions,o.routes=n.routes,o.isLoading=!1;break}case"GET_DATA_ERROR":{o.isLoading=!1;break}default:return o}}),Me=(s=!0)=>{const n=(0,i.useNotification)(),[{permissions:o,routes:r,isLoading:p},g]=(0,a.useReducer)(Rt,Pe,()=>jt(Pe,s)),E=(0,a.useCallback)(async()=>{try{g({type:"GET_DATA"});const[{permissions:C},{routes:A}]=await Promise.all([`/${d.A}/permissions`,`/${d.A}/routes`].map(async D=>(await re.A.get(D)).data));g({type:"GET_DATA_SUCCEEDED",permissions:(0,J.mr)(C),routes:A})}catch(C){const A=(0,X.get)(C,["response","payload","message"],"An error occured");g({type:"GET_DATA_ERROR"}),A!=="Forbidden"&&n({type:"warning",message:A})}},[n]);return(0,a.useEffect)(()=>{s&&E()},[E,s]),{permissions:o,routes:r,getData:E,isLoading:p}},Dt={role:{},isLoading:!0},St=(s,n)=>(0,ae.Ay)(s,o=>{switch(n.type){case"GET_DATA_SUCCEEDED":{o.role=n.role,o.isLoading=!1;break}case"GET_DATA_ERROR":{o.isLoading=!1;break}case"ON_SUBMIT_SUCCEEDED":{o.role.name=n.name,o.role.description=n.description;break}default:return o}}),Pt=s=>{const[n,o]=(0,a.useReducer)(St,Dt),r=(0,i.useNotification)(),p=(0,a.useRef)(null);(0,a.useEffect)(()=>(p.current=!0,s?g(s):o({type:"GET_DATA_SUCCEEDED",role:{}}),()=>p.current=!1),[s]);const g=async C=>{try{const{data:{role:A}}=await re.A.get(`/${d.A}/roles/${C}`);p.current&&o({type:"GET_DATA_SUCCEEDED",role:A})}catch(A){console.error(A),o({type:"GET_DATA_ERROR"}),r({type:"warning",message:{id:"notification.error"}})}},E=(0,a.useCallback)(C=>{o({type:"ON_SUBMIT_SUCCEEDED",...C})},[]);return{...n,onSubmitSucceeded:E}};var _=t(48656);const Mt=_.Ik().shape({name:_.Yj().required(i.translatedErrors.required),description:_.Yj().required(i.translatedErrors.required)}),Lt=()=>{const{formatMessage:s}=(0,R.A)(),[n,o]=(0,a.useState)(!1),r=(0,i.useNotification)(),{lockApp:p,unlockApp:g}=(0,i.useOverlayBlocker)(),{params:{id:E}}=(0,c.W5)(`/settings/${d.A}/roles/:id`),{isLoading:C,routes:A}=Me(),{role:D,onSubmitSucceeded:F,isLoading:B}=Pt(E),x=(0,a.useRef)(),k=async M=>{p(),o(!0);try{const w=x.current.getPermissions();await re.A.put(`/${d.A}/roles/${E}`,{...M,...w,users:[]}),F({name:M.name,description:M.description}),r({type:"success",message:{id:(0,q.A)("Settings.roles.edited"),defaultMessage:"Role edited"}})}catch(w){console.error(w),r({type:"warning",message:{id:"notification.error",defaultMessage:"An error occurred"}})}o(!1),g()};return B?(0,e.jsx)(i.LoadingIndicatorPage,{}):(0,e.jsxs)(v.Main,{children:[(0,e.jsx)(i.SettingsPageTitle,{name:"Roles"}),(0,e.jsx)(pe.Formik,{enableReinitialize:!0,initialValues:{name:D.name,description:D.description},onSubmit:k,validationSchema:Mt,children:({handleSubmit:M,values:w,handleChange:G,errors:z})=>(0,e.jsxs)(i.Form,{noValidate:!0,onSubmit:M,children:[(0,e.jsx)(u.HeaderLayout,{primaryAction:!C&&(0,e.jsx)(h.Button,{disabled:D.code==="strapi-super-admin",type:"submit",loading:n,startIcon:(0,e.jsx)(Ee(),{}),children:s({id:"global.save",defaultMessage:"Save"})}),title:D.name,subtitle:D.description,navigationAction:(0,e.jsx)(i.Link,{startIcon:(0,e.jsx)(Je(),{}),to:"/settings/users-permissions/roles",children:s({id:"global.back",defaultMessage:"Back"})})}),(0,e.jsx)(u.ContentLayout,{children:(0,e.jsxs)(Y.Stack,{spacing:7,children:[(0,e.jsx)(Z.Box,{background:"neutral0",hasRadius:!0,shadow:"filterShadow",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7,children:(0,e.jsxs)(Y.Stack,{spacing:4,children:[(0,e.jsx)(m.Typography,{variant:"delta",as:"h2",children:s({id:(0,q.A)("EditPage.form.roles"),defaultMessage:"Role details"})}),(0,e.jsxs)(Q.Grid,{gap:4,children:[(0,e.jsx)(Q.GridItem,{col:6,children:(0,e.jsx)(xe.TextInput,{name:"name",value:w.name||"",onChange:G,label:s({id:"global.name",defaultMessage:"Name"}),error:z.name?s({id:z.name,defaultMessage:"Invalid value"}):null})}),(0,e.jsx)(Q.GridItem,{col:6,children:(0,e.jsx)(ye.Textarea,{name:"description",value:w.description||"",onChange:G,label:s({id:"global.description",defaultMessage:"Description"}),error:z.description?s({id:z.description,defaultMessage:"Invalid value"}):null})})]})]})}),!C&&(0,e.jsx)(Se,{ref:x,permissions:D.permissions,routes:A})]})})]})})]})},Bt=()=>(0,e.jsx)(i.CheckPagePermissions,{permissions:f.A.updateRole,children:(0,e.jsx)(Lt,{})}),Ot=_.Ik().shape({name:_.Yj().required(i.translatedErrors.required),description:_.Yj().required(i.translatedErrors.required)}),Ft=()=>{const{formatMessage:s}=(0,R.A)(),[n,o]=(0,a.useState)(!1),r=(0,i.useNotification)(),{goBack:p}=(0,c.W6)(),{lockApp:g,unlockApp:E}=(0,i.useOverlayBlocker)(),{isLoading:C,permissions:A,routes:D}=Me(),{trackUsage:F}=(0,i.useTracking)(),B=(0,a.useRef)(),x=async k=>{g(),o(!0);try{const M=B.current.getPermissions();await re.A.post(`/${d.A}/roles`,{...k,...M,users:[]}),F("didCreateRole"),r({type:"success",message:{id:(0,q.A)("Settings.roles.created"),defaultMessage:"Role created"}}),p()}catch(M){console.error(M),r({type:"warning",message:{id:"notification.error",defaultMessage:"An error occurred"}})}o(!1),E()};return(0,e.jsxs)(v.Main,{children:[(0,e.jsx)(i.SettingsPageTitle,{name:"Roles"}),(0,e.jsx)(pe.Formik,{enableReinitialize:!0,initialValues:{name:"",description:""},onSubmit:x,validationSchema:Ot,children:({handleSubmit:k,values:M,handleChange:w,errors:G})=>(0,e.jsxs)(i.Form,{noValidate:!0,onSubmit:k,children:[(0,e.jsx)(u.HeaderLayout,{primaryAction:!C&&(0,e.jsx)(h.Button,{type:"submit",loading:n,startIcon:(0,e.jsx)(Ee(),{}),children:s({id:"global.save",defaultMessage:"Save"})}),title:s({id:"Settings.roles.create.title",defaultMessage:"Create a role"}),subtitle:s({id:"Settings.roles.create.description",defaultMessage:"Define the rights given to the role"})}),(0,e.jsx)(u.ContentLayout,{children:(0,e.jsxs)(Y.Stack,{spacing:7,children:[(0,e.jsx)(Z.Box,{background:"neutral0",hasRadius:!0,shadow:"filterShadow",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7,children:(0,e.jsxs)(Y.Stack,{spacing:4,children:[(0,e.jsx)(m.Typography,{variant:"delta",as:"h2",children:s({id:(0,q.A)("EditPage.form.roles"),defaultMessage:"Role details"})}),(0,e.jsxs)(Q.Grid,{gap:4,children:[(0,e.jsx)(Q.GridItem,{col:6,children:(0,e.jsx)(xe.TextInput,{name:"name",value:M.name||"",onChange:w,label:s({id:"global.name",defaultMessage:"Name"}),error:G.name?s({id:G.name,defaultMessage:"Invalid value"}):null})}),(0,e.jsx)(Q.GridItem,{col:6,children:(0,e.jsx)(ye.Textarea,{name:"description",value:M.description||"",onChange:w,label:s({id:"global.description",defaultMessage:"Description"}),error:G.description?s({id:G.description,defaultMessage:"Invalid value"}):null})})]})]})}),!C&&(0,e.jsx)(Se,{ref:B,permissions:A,routes:D})]})})]})})]})},kt=()=>(0,e.jsx)(i.CheckPagePermissions,{permissions:f.A.createRole,children:(0,e.jsx)(Ft,{})}),Nt=()=>(0,e.jsx)(i.CheckPagePermissions,{permissions:f.A.accessRoles,children:(0,e.jsxs)(c.dO,{children:[(0,e.jsx)(c.qh,{path:`/settings/${d.A}/roles/new`,component:kt,exact:!0}),(0,e.jsx)(c.qh,{path:`/settings/${d.A}/roles/:id`,component:Bt,exact:!0}),(0,e.jsx)(c.qh,{path:`/settings/${d.A}/roles`,component:Ze,exact:!0}),(0,e.jsx)(c.qh,{path:"",component:i.NotFound})]})})},48126:(T,l,t)=>{var e=t(64958);function a(c,i,d){for(var f=-1,h=c.criteria,u=i.criteria,v=h.length,P=d.length;++f<v;){var L=e(h[f],u[f]);if(L){if(f>=P)return L;var m=d[f];return L*(m=="desc"?-1:1)}}return c.index-i.index}T.exports=a},52120:(T,l,t)=>{"use strict";Object.defineProperty(l,Symbol.toStringTag,{value:"Module"});const e=t(19717);l.VisuallyHidden=e.VisuallyHidden},55985:(T,l)=>{"use strict";Object.defineProperty(l,Symbol.toStringTag,{value:"Module"});const t=e=>{const a=e.querySelector('[tabindex="0"]');a&&a.focus()};l.focusFocusable=t},58425:(T,l,t)=>{"use strict";Object.defineProperty(l,Symbol.toStringTag,{value:"Module"});const e=t(92132),a=t(63891),c=t(13555),f=(u=>u&&u.__esModule?u:{default:u})(a).default(c.RawTbody)`
  & tr:last-of-type {
    border-bottom: none;
  }
`,h=({children:u,...v})=>e.jsx(f,{...v,children:u});l.Tbody=h},59957:(T,l,t)=>{"use strict";Object.defineProperty(l,Symbol.toStringTag,{value:"Module"});const e=t(92132),a=t(63891),c=t(44575),i=t(69909),f=(L=>L&&L.__esModule?L:{default:L})(a),h=f.default(c.RawTd)`
  vertical-align: middle;
  text-align: left;
  color: ${({theme:L})=>L.colors.neutral600};
  outline-offset: -4px;

  /**
  * Hack to make sure the checkbox looks aligned
  */
  input {
    vertical-align: sub;
  }
`,u=f.default.span`
  svg {
    height: ${4/16}rem;
  }
`,v=({children:L,action:m,...S})=>e.jsx(h,{as:c.RawTh,...S,children:e.jsxs(i.Flex,{children:[L,e.jsx(u,{children:m})]})}),P=({children:L,...m})=>e.jsx(h,{...m,children:L});l.Td=P,l.Th=v},61468:(T,l,t)=>{var e=t(52196);function a(c){var i=c==null?0:c.length;return i?e(c,1,i):[]}T.exports=a},64958:(T,l,t)=>{var e=t(91662);function a(c,i){if(c!==i){var d=c!==void 0,f=c===null,h=c===c,u=e(c),v=i!==void 0,P=i===null,L=i===i,m=e(i);if(!P&&!m&&!u&&c>i||u&&v&&L&&!P&&!m||f&&v&&L||!d&&L||!h)return 1;if(!f&&!u&&!m&&c<i||m&&d&&h&&!f&&!u||P&&d&&h||!v&&h||!L)return-1}return 0}T.exports=a},74565:T=>{function l(t,e){var a=t.length;for(t.sort(e);a--;)t[a]=t[a].value;return t}T.exports=l},75821:(T,l,t)=>{var e=t(91522);function a(c,i){return function(d,f){if(d==null)return d;if(!e(d))return c(d,f);for(var h=d.length,u=i?h:-1,v=Object(d);(i?u--:++u<h)&&f(v[u],u,v)!==!1;);return d}}T.exports=a},84198:(T,l,t)=>{"use strict";Object.defineProperty(l,Symbol.toStringTag,{value:"Module"});const e=t(92132),a=t(63891),c=t(73725),i=t(31781),d=t(69909),f=t(48941),u=(m=>m&&m.__esModule?m:{default:m})(a),v=u.default(c.Box)`
  height: ${24/16}rem;
  width: ${24/16}rem;
  border-radius: 50%;
  display: flex;
  justify-content: center;
  align-items: center;

  svg {
    height: ${10/16}rem;
    width: ${10/16}rem;
  }

  svg path {
    fill: ${({theme:m})=>m.colors.primary600};
  }
`,P=u.default(c.Box)`
  border-radius: 0 0 ${({theme:m})=>m.borderRadius} ${({theme:m})=>m.borderRadius};
  display: block;
  width: 100%;
  border: none;
`,L=({children:m,icon:S,...K})=>e.jsxs("div",{children:[e.jsx(i.Divider,{}),e.jsx(P,{as:"button",background:"primary100",padding:5,...K,children:e.jsxs(d.Flex,{children:[e.jsx(v,{"aria-hidden":!0,background:"primary200",children:S}),e.jsx(c.Box,{paddingLeft:3,children:e.jsx(f.Typography,{variant:"pi",fontWeight:"bold",textColor:"primary600",children:m})})]})})]});l.TFooter=L},90265:(T,l,t)=>{"use strict";Object.defineProperty(l,Symbol.toStringTag,{value:"Module"});const e=t(90281),a=t(58425),c=t(91387),i=t(36735),d=t(59957),f=t(84198);l.Table=e.Table,l.Tbody=a.Tbody,l.Thead=c.Thead,l.Tr=i.Tr,l.Td=d.Td,l.Th=d.Th,l.TFooter=f.TFooter},90281:(T,l,t)=>{"use strict";Object.defineProperty(l,Symbol.toStringTag,{value:"Module"});const e=t(92132),a=t(21272),c=t(63891),i=t(38807),d=t(73725),h=(S=>S&&S.__esModule?S:{default:S})(c),u=h.default(d.Box)`
  overflow: hidden;
  border: 1px solid ${({theme:S})=>S.colors.neutral150};
`,v=h.default(i.RawTable)`
  width: 100%;
  white-space: nowrap;
`,P=h.default(d.Box)`
  &:before {
    // TODO: make sure to add a token for this weird stuff
    background: linear-gradient(90deg, #c0c0cf 0%, rgba(0, 0, 0, 0) 100%);
    opacity: 0.2;
    position: absolute;
    height: 100%;
    content: ${({overflowing:S})=>S==="both"||S==="left"?"''":void 0};
    box-shadow: ${({theme:S})=>S.shadows.tableShadow};
    width: ${({theme:S})=>S.spaces[2]};
    left: 0;
  }

  &:after {
    // TODO: make sure to add a token for this weird stuff
    background: linear-gradient(270deg, #c0c0cf 0%, rgba(0, 0, 0, 0) 100%);
    opacity: 0.2;
    position: absolute;
    height: 100%;
    content: ${({overflowing:S})=>S==="both"||S==="right"?"''":void 0};
    box-shadow: ${({theme:S})=>S.shadows.tableShadow};
    width: ${({theme:S})=>S.spaces[2]};
    right: 0;
    top: 0;
  }
`,L=h.default(d.Box)`
  overflow-x: auto;
`,m=({footer:S,...K})=>{const U=a.useRef(null),[R,N]=a.useState(),H=I=>{const O=I.target.scrollWidth-I.target.clientWidth;if(I.target.scrollLeft===0){N("right");return}if(I.target.scrollLeft===O){N("left");return}I.target.scrollLeft>0&&N("both")};return a.useEffect(()=>{U.current.scrollWidth>U.current.clientWidth&&N("right")},[]),e.jsxs(u,{shadow:"tableShadow",hasRadius:!0,background:"neutral0",children:[e.jsx(P,{overflowing:R,position:"relative",children:e.jsx(L,{ref:U,onScroll:H,paddingLeft:6,paddingRight:6,children:e.jsx(v,{...K})})}),S]})};l.Table=m},91387:(T,l,t)=>{"use strict";Object.defineProperty(l,Symbol.toStringTag,{value:"Module"});const e=t(92132),a=t(63891),c=t(33333),f=(u=>u&&u.__esModule?u:{default:u})(a).default(c.RawThead)`
  border-bottom: 1px solid ${({theme:u})=>u.colors.neutral150};
`,h=({children:u,...v})=>e.jsx(f,{...v,children:u});l.Thead=h},97449:(T,l,t)=>{var e=t(85373),a=t(75821),c=a(e);T.exports=c}}]);
