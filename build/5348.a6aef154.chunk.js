"use strict";(self.webpackChunkmy_project=self.webpackChunkmy_project||[]).push([[5348],{5348:(S,m,s)=>{s.r(m),s.d(m,{default:()=>V});var e=s(92132),l=s(21272),E=s(94061),c=s(88353),M=s(42455),C=s(4198),d=s(55356),x=s(25815),A=s(38413),T=s(83997),j=s(35513),O=s(25641),p=s(26127),u=s(90361),g=s(33363),D=s(85829),r=s(91356),P=s(83925),f=s(70603),L=s(50612),B=s(14718),R=s(54894),a=s(63891),_=s(68785),i=s(76867),q=s(74930);const V=()=>{(0,r.useFocusWhenNavigate)();const{formatMessage:n}=(0,R.A)(),{data:o,isLoading:y,isError:H,remove:F,regenerate:G}=(0,i.u)(),[h,I]=(0,l.useState)(!1),[Q,K]=(0,l.useState)(!1),[z,X]=(0,l.useState)(),{allowedActions:v}=(0,r.useRBAC)(_.P),J=4,Y=(o?.docVersions?.length||0)+1,Z=t=>{G.mutate({version:t,prefix:o?.prefix})},w=()=>{I(!h)},b=async()=>{K(!0),await F.mutateAsync({prefix:o?.prefix,version:z}),I(!h),K(!1)},k=t=>{X(t),I(!h)},$=n({id:(0,i.g)("plugin.name"),defaultMessage:"Documentation"});return H?(0,e.jsx)(M.P,{children:(0,e.jsx)(C.s,{children:(0,e.jsx)(E.a,{paddingTop:8,children:(0,e.jsx)(r.AnErrorOccurred,{})})})}):(0,e.jsxs)(M.P,{children:[(0,e.jsx)(B.m,{title:$}),(0,e.jsxs)(A.g,{"aria-busy":y,children:[(0,e.jsx)(d.Q,{title:$,subtitle:n({id:(0,i.g)("pages.PluginPage.header.description"),defaultMessage:"Configure the documentation plugin"}),primaryAction:(0,e.jsx)(N,{disabled:!v.canOpen||!o?.currentVersion||!o?.prefix,href:W(`${o?.prefix}/v${o?.currentVersion}`),startIcon:(0,e.jsx)(P.A,{}),children:n({id:(0,i.g)("pages.PluginPage.Button.open"),defaultMessage:"Open Documentation"})})}),(0,e.jsxs)(C.s,{children:[y&&(0,e.jsx)(r.LoadingIndicatorPage,{children:"Plugin is loading"}),o?.docVersions.length?(0,e.jsxs)(j.X,{colCount:J,rowCount:Y,children:[(0,e.jsx)(p.d,{children:(0,e.jsxs)(u.Tr,{children:[(0,e.jsx)(g.Th,{children:(0,e.jsx)(D.o,{variant:"sigma",textColor:"neutral600",children:n({id:(0,i.g)("pages.PluginPage.table.version"),defaultMessage:"Version"})})}),(0,e.jsx)(g.Th,{children:(0,e.jsx)(D.o,{variant:"sigma",textColor:"neutral600",children:n({id:(0,i.g)("pages.PluginPage.table.generated"),defaultMessage:"Last Generated"})})})]})}),(0,e.jsx)(O.N,{children:o.docVersions.sort((t,U)=>t.generatedDate<U.generatedDate?1:-1).map(t=>(0,e.jsxs)(u.Tr,{children:[(0,e.jsx)(g.Td,{width:"50%",children:(0,e.jsx)(D.o,{children:t.version})}),(0,e.jsx)(g.Td,{width:"50%",children:(0,e.jsx)(D.o,{children:t.generatedDate})}),(0,e.jsx)(g.Td,{children:(0,e.jsxs)(T.s,{justifyContent:"end",onClick:U=>U.stopPropagation(),children:[(0,e.jsx)(c.K,{forwardedAs:"a",disabled:!v.canOpen,href:W(`${o.prefix}/v${t.version}`),noBorder:!0,icon:(0,e.jsx)(P.A,{}),target:"_blank",rel:"noopener noreferrer",label:n({id:(0,i.g)("pages.PluginPage.table.icon.show"),defaultMessage:"Open {target}"},{target:`${t.version}`})}),v.canRegenerate?(0,e.jsx)(c.K,{onClick:()=>Z(t.version),noBorder:!0,icon:(0,e.jsx)(f.A,{}),label:n({id:(0,i.g)("pages.PluginPage.table.icon.regenerate"),defaultMessage:"Regenerate {target}"},{target:`${t.version}`})}):null,v.canUpdate&&t.version!==o.currentVersion?(0,e.jsx)(c.K,{onClick:()=>k(t.version),noBorder:!0,icon:(0,e.jsx)(L.A,{}),label:n({id:"global.delete-target",defaultMessage:"Delete {target}"},{target:`${t.version}`})}):null]})})]},t.version))})]}):(0,e.jsx)(r.EmptyStateLayout,{})]}),(0,e.jsx)(r.ConfirmDialog,{isConfirmButtonLoading:Q,onConfirm:b,onToggleDialog:w,isOpen:h})]})]})},N=(0,a.default)(x.z)`
  text-decoration: none;
`,W=n=>n.startsWith("http")?n:n.startsWith("/")?`${window.strapi.backendURL}${n}`:`${window.strapi.backendURL}/${n}`},76867:(S,m,s)=>{s.d(m,{g:()=>M,u:()=>C});var e=s(21272),l=s(91356),E=s(74930),c=s(68785);const M=d=>`${c.p}.${d}`,C=()=>{const d=(0,l.useNotification)(),{del:x,post:A,put:T,get:j}=(0,l.useFetchClient)(),{formatAPIError:O}=(0,l.useAPIErrorHandler)(),{isLoading:p,isError:u,data:g,refetch:D,error:r}=(0,E.useQuery)(["get-documentation",c.p],async()=>{const{data:a}=await j(`/${c.p}/getInfos`);return a});(0,e.useEffect)(()=>{u&&r&&d({type:"warning",message:r?O(r):{id:"notification.error"}})},[u,r,d,O]);const P=a=>{d({type:"warning",message:O(a)})},f=(a,_,i)=>{D(),d({type:a,message:{id:M(_),defaultMessage:i}})},L=(0,E.useMutation)(({prefix:a,version:_})=>x(`${a}/deleteDoc/${_}`),{onSuccess:()=>f("info","notification.delete.success","Successfully deleted documentation"),onError:P}),B=(0,E.useMutation)(({prefix:a,body:_})=>T(`${a}/updateSettings`,_),{onSuccess:()=>f("success","notification.update.success","Successfully updated settings"),onError:P}),R=(0,E.useMutation)(({prefix:a,version:_})=>A(`${a}/regenerateDoc`,{version:_}),{onSuccess:()=>f("info","notification.generate.success","Successfully generated documentation"),onError:P});return{data:g,isLoading:p,isError:u,remove:L,submit:B,regenerate:R}}}}]);
